
---

# Lv 5. 내 문제 인식 및 해결 과정

## 1. 문제 인식 및 정의

* `CommentService`에서 예외 메시지가 하드코딩되어 있어 유지보수가 어렵다.
* 예외 타입이 혼용되어 예외 처리 일관성이 부족하다.
* 댓글 저장 시 내용에 대한 유효성 검사가 없어 빈 댓글 저장이 가능하다.
* 댓글 조회 시 DTO 변환에 for문을 사용해 코드가 장황하다.

## 2. 해결 방안

### 2-1. 의사결정 과정

* 예외 메시지를 코드 내 상수로 분리해 관리하면 수정이 용이하다고 판단했다.
* 예외 타입을 `InvalidRequestException`으로 통일해 클라이언트 요청 오류임을 명확히 했다.
* 댓글 내용이 `null` 또는 빈 문자열일 경우 예외를 발생시키도록 하여 데이터 무결성을 보장한다.
* for문 대신 Java Stream API를 활용해 DTO 변환 코드를 간결하고 가독성 높게 작성한다.

### 2-2. 해결 과정

* 예외 메시지를 상수로 분리하고, 관련된 예외 발생 부분에 적용했다.
* `saveComment` 메서드에 댓글 내용 유효성 검사 로직을 추가했다.
* `getComments` 메서드를 Stream API로 리팩토링했다.

## 3. 해결 완료

### 3-1. 회고

* 예외 메시지 상수화로 중복이 줄고, 유지보수가 쉬워졌다.
* 예외 타입 통일로 클라이언트와 서버 간 명확한 예외 처리가 가능해졌다.
* 댓글 내용 검증으로 빈 댓글 저장 방지, 데이터 품질 향상에 기여했다.
* Stream API 적용으로 코드가 간결해지고 가독성이 좋아졌다.
* 앞으로도 일관된 예외 처리와 코드 간결성을 우선시하며 유지보수성을 높일 계획이다.

### 3-2. 전후 데이터 비교

| 항목       | 변경 전                     | 변경 후                          |
| -------- | ------------------------ | ----------------------------- |
| 예외 메시지   | 하드코딩                     | 상수로 관리                        |
| 예외 타입    | 혼용 (`ServerException` 등) | `InvalidRequestException`로 통일 |
| 댓글 내용 검증 | 없음                       | `null` 또는 빈 문자열 예외 처리         |
| DTO 변환   | for문                     | Stream API 활용                 |

---

